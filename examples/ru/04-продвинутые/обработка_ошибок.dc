# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ DataCode
# –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –±–ª–æ–∫–∏ try/catch/throw/finally

print("============================================================")
print("–ü—Ä–∏–º–µ—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫")
print("============================================================")
print()

# –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤—ã–π try/catch
print("üîç –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤—ã–π try/catch...")
try {
    global result = 10 / 0
    print("  –≠—Ç–æ –Ω–µ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ")
} catch e {
    print("  ‚úì –û—à–∏–±–∫–∞ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–∞:", e)
    global error_handled = true
}
print()

# –ü—Ä–∏–º–µ—Ä 2: try/catch –±–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ—à–∏–±–∫–∏
print("üîç –ü—Ä–∏–º–µ—Ä 2: try/catch –±–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ—à–∏–±–∫–∏...")
try {
    global x = 42
    print("  ‚úì –ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ: x =", x)
} catch {
    print("  –≠—Ç–æ –Ω–µ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ (–Ω–µ—Ç –æ—à–∏–±–∫–∏)")
}
print()

# –ü—Ä–∏–º–µ—Ä 3: try/finally
print("üîç –ü—Ä–∏–º–µ—Ä 3: try/finally...")
global cleanup_done = false
try {
    global value = 100
    print("  ‚úì –ó–Ω–∞—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:", value)
} finally {
    global cleanup_done = true
    print("  ‚úì –ë–ª–æ–∫ finally –≤—ã–ø–æ–ª–Ω–µ–Ω (cleanup done =", cleanup_done, ")")
}
print()

# –ü—Ä–∏–º–µ—Ä 4: try/catch/finally
print("üîç –ü—Ä–∏–º–µ—Ä 4: try/catch/finally...")
global error_caught = false
global cleanup_completed = false
try {
    throw "–¢–µ—Å—Ç–æ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ"
    print("  –≠—Ç–æ –Ω–µ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ")
} catch e {
    global error_caught = true
    print("  ‚úì –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–æ:", e)
} finally {
    global cleanup_completed = true
    print("  ‚úì –ë–ª–æ–∫ finally –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è (cleanup =", cleanup_completed, ")")
}
print()

# –ü—Ä–∏–º–µ—Ä 5: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ throw –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π
print("üîç –ü—Ä–∏–º–µ—Ä 5: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ throw –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π...")
fn validate_age(age) {
    if age < 0 {
        throw "–í–æ–∑—Ä–∞—Å—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º"
    }
    if age > 150 {
        throw "–í–æ–∑—Ä–∞—Å—Ç –∫–∞–∂–µ—Ç—Å—è –Ω–µ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º"
    }
    return true
}

try {
    validate_age(-5)
} catch e {
    print("  ‚úì –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–∞:", e)
}

try {
    validate_age(200)
} catch e {
    print("  ‚úì –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–∞:", e)
}

try {
    validate_age(25)
    print("  ‚úì –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–æ–∑—Ä–∞—Å—Ç–∞ –ø—Ä–æ—à–ª–∞ –¥–ª—è 25")
} catch e {
    print("  –≠—Ç–æ –Ω–µ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ")
}
print()

# –ü—Ä–∏–º–µ—Ä 6: –í–ª–æ–∂–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏ try/catch
print("üîç –ü—Ä–∏–º–µ—Ä 6: –í–ª–æ–∂–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏ try/catch...")
try {
    global outer_step = "step1"
    print("  ‚úì –í–Ω–µ—à–Ω–∏–π try: step1")
    
    try {
        global inner_step = "step2"
        print("  ‚úì –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π try: step2")
        throw "–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ"
    } catch e {
        print("  ‚úì –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π catch: –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ", e)
        global inner_handled = true
    }
    
    global outer_step = "step3"
    print("  ‚úì –í–Ω–µ—à–Ω–∏–π try: step3")
} catch e {
    print("  ‚úì –í–Ω–µ—à–Ω–∏–π catch: –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ", e)
}
print()

# –ü—Ä–∏–º–µ—Ä 7: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö
print("üîç –ü—Ä–∏–º–µ—Ä 7: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö...")
fn safe_divide(a, b) {
    if b == 0 {
        throw "–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è"
    }
    return a / b
}

fn calculate_with_error_handling(a, b) {
    try {
        let result = safe_divide(a, b)
        return result
    } catch e {
        print("  ‚ö†Ô∏è  –û—à–∏–±–∫–∞ –≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏:", e)
        return null
    }
}

global result1 = calculate_with_error_handling(10, 2)
print("  ‚úì 10 / 2 =", result1)

global result2 = calculate_with_error_handling(10, 0)
print("  ‚úì 10 / 0 –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç =", result2)
print()

# –ü—Ä–∏–º–µ—Ä 8: –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
print("üîç –ü—Ä–∏–º–µ—Ä 8: –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫...")
fn safe_read_file(file_path) {
    try {
        let data = read_file(file_path)
        return data
    } catch e {
        print("  ‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª:", file_path, "-", e)
        return null
    }
}

global test_file = path("nonexistent_file.txt")
global file_data = safe_read_file(test_file)
if file_data == null {
    print("  ‚úì –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
}
print()

# –ü—Ä–∏–º–µ—Ä 9: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
print("üîç –ü—Ä–∏–º–µ—Ä 9: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫...")
fn process_data(data) {
    try {
        if data == null {
            throw "–î–∞–Ω–Ω—ã–µ —Ä–∞–≤–Ω—ã null"
        }
        if len(data) == 0 {
            throw "–î–∞–Ω–Ω—ã–µ –ø—É—Å—Ç—ã"
        }
        return "–û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–∞"
    } catch e {
        return "–û—à–∏–±–∫–∞: " + e
    }
}

global result3 = process_data([1, 2, 3])
print("  ‚úì", result3)

global result4 = process_data(null)
print("  ‚úì", result4)

global result5 = process_data([])
print("  ‚úì", result5)
print()

# –ü—Ä–∏–º–µ—Ä 10: –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
print("üîç –ü—Ä–∏–º–µ—Ä 10: –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–æ–∫...")
fn level1() {
    throw "–û—à–∏–±–∫–∞ –∏–∑ level 1"
}

fn level2() {
    level1()
}

try {
    level2()
} catch e {
    print("  ‚úì –û—à–∏–±–∫–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –∏ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–∞:", e)
}
print()

print("============================================================")
print("‚úÖ –ü—Ä–∏–º–µ—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω—ã")
print("============================================================")

