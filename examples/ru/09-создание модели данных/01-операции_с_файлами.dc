# –ü—Ä–∏–º–µ—Ä 1: –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏
# –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Ñ–∞–π–ª–∞–º–∏ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º–∏ –≤ DataCode

print("============================================================")
print("–ü—Ä–∏–º–µ—Ä 1: –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏")
print("============================================================")
print()

# –ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏
let base_path = getcwd() / "model_data"
let docs_path = base_path / "docs"

print("üìÇ –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º–∏")
print("  –ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å: ", base_path)
print()

# –ü—Ä–∏–º–µ—Ä 1.1: –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
print("üîç –ü—Ä–∏–º–µ—Ä 1.1: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏...")
try {
    let files = list_files(docs_path)
    print("  ‚úì –ù–∞–π–¥–µ–Ω–æ ", len(files), " —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ docs")
    print("  ‚úì –≠–ª–µ–º–µ–Ω—Ç—ã: ", files)
    print()
} catch e {
    print("  ‚úó –û—à–∏–±–∫–∞: ", e)
    print()
}

# –ü—Ä–∏–º–µ—Ä 1.2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ –≤ —Å–ø–∏—Å–∫–µ
print("üîç –ü—Ä–∏–º–µ—Ä 1.2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞...")
fn file_exists(files, filename) {
    for file in files {
        if file.name == filename {
            return true
        }
    }
    return false
}

try {
    let month_path = base_path / "2023" / "01"
    let month_files = list_files(month_path)
    
    let test_file = "sales_2023_01.csv"
    let exists = file_exists(month_files, test_file)
    
    if exists {
        print("  ‚úì –§–∞–π–ª –Ω–∞–π–¥–µ–Ω: ", test_file)
    } else {
        print("  ‚úó –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: ", test_file)
    }
    print()
} catch e {
    print("  ‚úó –û—à–∏–±–∫–∞: ", e)
    print()
}

# –ü—Ä–∏–º–µ—Ä 1.3: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É—Ç–∏
print("üîç –ü—Ä–∏–º–µ—Ä 1.3: –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—É—Ç–µ–π –∫ —Ñ–∞–π–ª–∞–º...")
try {
    let year = "2023"
    let month = "01"
    let filename = "sales_2023_01.csv"
    
    # –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –ø—É—Ç—å –ø–æ—à–∞–≥–æ–≤–æ
    let year_path = base_path / year
    let month_path = year_path / month
    let full_path = month_path / filename
    
    print("  –ü—É—Ç—å –∫ –≥–æ–¥—É: ", year_path)
    print("  –ü—É—Ç—å –∫ –º–µ—Å—è—Ü—É: ", month_path)
    print("  –ü–æ–ª–Ω—ã–π –ø—É—Ç—å: ", full_path)
    print()
    
    # –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª
    let data = read_file(full_path)
    print("  ‚úì –§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–Ω")
    print("  ‚úì –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö: ", typeof(data))
    if typeof(data) == "table" {
        print("  ‚úì –°—Ç—Ä–æ–∫: ", len(data))
        print("  ‚úì –°—Ç—Ä–æ–∫–∞ 1: ", data.idx[1])
        print("  ‚úì –ó–∞–≥–æ–ª–æ–≤–∫–∏: ", data.columns)
    }
    print()
} catch e {
    print("  ‚úó –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞: ", e)
    print()
}

# –ü—Ä–∏–º–µ—Ä 1.4: –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
print("üîç –ü—Ä–∏–º–µ—Ä 1.4: –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π...")
try {
    let year_dirs = list_files(base_path)
    print("  –ù–∞–π–¥–µ–Ω–æ ", len(year_dirs), " —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –±–∞–∑–æ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏")
    
    let file_count = 0
    for year_dir in year_dirs {
        # –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã, –Ω–µ —è–≤–ª—è—é—â–∏–µ—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º–∏
        if year_dir.name != "docs" and !contains(year_dir.name, ".") {
            print("-", year_dir)
            let month_dirs = list_files(year_dir)
            
            for month_dir in month_dirs {
                if !contains(month_dir, ".") {
                    let files = list_files(month_dir)
                    file_count = file_count + len(files)
                }
            }
        }
    }
    
    print("  ‚úì –í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: ", file_count)
    print()
} catch e {
    print("  ‚úó –û—à–∏–±–∫–∞: ", e)
    print()
}

print("============================================================")
print("‚úÖ –ü—Ä–∏–º–µ—Ä 1 –∑–∞–≤–µ—Ä—à—ë–Ω")
print("============================================================")
